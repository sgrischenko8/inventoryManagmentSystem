import{o as A,p as F,a as I,r as m,j as e,L as N,q as H}from"./index-e7c6efce.js";const $="_formEditProduct_1pazf_1",z={formEditProduct:$},O=({onClose:u,refetch:d,product:n})=>{const[i,{isLoading:l}]=A(),[g,{isLoading:x}]=F(),{data:s,isLoading:y}=I(!1),[C,P]=m.useState(n?.name),[b,E]=m.useState(n?.quantity),[_,v]=m.useState(n?.price),[f,q]=m.useState(s?.findIndex(t=>n?.category?._id===t._id)),p={name:C,quantity:b,price:_},j=n?"Edit Product":"Add Product";function L(t){const r=t.target,o=r.value,c=r.name;c==="name"&&P(o),c==="quantity"&&E(+o),c==="price"&&v(+o)}function S(t){const o=t.target.selectedIndex;q(o)}async function w(t){t.preventDefault();const o=t.target.elements,c=Array.from(o).filter(a=>a.name),h={};c.map(a=>{h[a.name]=a.name==="category"?s[f]:a.name==="name"?a.value:+a.value});try{if(n){const a={id:n._id,body:h};await g(a).unwrap()}else await i(h).unwrap();u(),d&&d()}catch(a){console.log(a)}}return e.jsxs("form",{onSubmit:w,className:z.formEditProduct,children:[Object.keys(p).map(t=>e.jsxs("label",{children:[t,":",e.jsx("input",{type:t==="name"?"text":"number",name:t,placeholder:`Enter the ${t}`,value:p[t],onChange:L,autoFocus:t==="name"&&!n,step:t==="price"?"0.01":"1",min:t==="quantity"?1:void 0,required:!0})]},t)),e.jsxs("fieldset",{children:["Category:"," ",e.jsx("select",{name:"category",value:s&&s[f]?.name,onChange:S,children:s?.map((t,r)=>e.jsx("option",{value:t.name,children:t.name},r))})]}),e.jsx("button",{type:"submit",title:j,disabled:l,onClick:()=>!1,children:j}),l||(y||x)&&e.jsx(N,{})]})},M="_catalogCard_fqjl8_1",Q={catalogCard:M},R=({item:u,short:d})=>{const{_id:n,name:i,price:l,quantity:g,category:x}=u,s="https://loremflickr.com/640/480/";return e.jsxs(H,{to:`/${n}`,className:Q.catalogCard,children:[e.jsx("img",{src:s+i,alt:i,width:200,height:150,loading:"lazy"}),e.jsxs("h4",{children:[" ",i]}),!d&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Category: ",e.jsx("b",{children:x?.name})]}),e.jsxs("p",{children:["â‚´ ",l]}),e.jsxs("p",{children:["Amount: ",g]})]})]})};export{R as C,O as P};
